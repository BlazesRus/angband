<div id="wikinav"><div class="highlight_box"> Navigation:<br /><a href="http://rephial.org/wiki/Home">Home</a><br /><a href="http://rephial.org/wiki/IndexPage">IndexPage</a><br /></div><div class="highlight_box"> This page:<br /><a href="http://rephial.org/wiki/xref/UserManual/InscriptionsAndMacros">Links to here</a><br />Last modified:<br />2010-01-09 at 07:42<br /></div></div>

<div id="wikihead"><h2><a href="http://rephial.org/wiki/UserManual">UserManual</a> &gt; InscriptionsAndMacros</h2></div>

<div id="wikicontent"><div class="page"><h3 id="s1_1">Inscriptions</h3><p>You use the &#39;{&#39; and &#39;}&#39; keys to inscribe and uninscribe objects. The inscription on an object can have all sorts of effects.<h4 id="s2_1">To designate a main and backup weapon:</h4><p>Inscribe both with &quot;@w0&quot;. The &#39;X&#39; command will replace whatever melee weapon you are wielding with another so inscribed. You may also inscribe these or other weapons with &quot;@w1&quot;, etc., and wield weapons 0, 1, 2 and so on as desired.<h4 id="s2_2">To have a given command always use the same spellbook:</h4><p>Inscribe it with &quot;@m#&quot;, or &quot;@p#&quot;, replacing the &#39;#&#39; with whatever digit you desire. This allows you to set up macros to cast a spell knowing that it will never choose the wrong book. Similar inscriptions make archery very convenient, and allow you to always use a given magical device with the same keystrokes.<p>In general, if you inscribe anything with @&lt;any command&gt;&lt;any digit&gt;, you can issue the command, type the digit, and use the first legal inscribed object.<h4 id="s2_3">To prevent accidental use of an object with any command:</h4><p>Inscribe it with &quot;!x&quot;, where &#39;x&#39; is the letter you type to issue that command. If you are very paranoid, inscribe it with &quot;!*&quot;<h4 id="s2_4">To automatically pick up an object:</h4><p>Inscribe it with &quot;=g&quot;. Especially useful for anything you throw.<h4 id="s2_5">Inscriptions for fun and profit:</h4><p>Try inscribing the first monster killed by a weapon, hidden object abilities, and where you found the item or who dropped it.<h4 id="s2_6">Automatic inscriptions:</h4><p>The game also inscribes objects automatically. Some of these inscriptions will disappear when the item is identified, and you may overwrite others.<ul><li>&quot;broken&quot;: Object is broken in some way.<li>&quot;cursed&quot;: Object is cursed.<li>&quot;empty&quot;: Object has no more charges (and you know this).<li>&quot;indestructible&quot;: Object cannot be destroyed.<li>&quot;tried&quot;: Used an object, didn&#39;t learn anything about it.<li>&quot;50% off&quot;: Object is worth 50% less than normal.</ul><h3 id="s1_2">Macros and keymaps</h3><h4 id="s2_7">Quick Tutorial</h4><p>Mages are forever casting spell &quot;a&quot;, Magic Missile, in spellbook &quot;a&quot;, Magic for Beginners. In both keysets, that&#39;s &quot;maa&quot;, plus &quot;*&quot; to enter targeting mode, and finally &quot;t&quot; to target. Wouldn&#39;t it be nice if you could do all this with a single keypress? You can.<p>Choose an unused command (we shall pick &quot;&#39;&quot; by way of example). Bring up the macro/keymap screen by typing &quot;@&quot;. Press &quot;8&quot; to create a keymap, and the game will ask you for a trigger. Type &quot;&#39;&quot;. You then shift to the action field, where you input all the commands you want &quot;&#39;&quot; to perform when pressed. In this case, you would enter: &quot;maa*t&quot;, and press return.<p>Now save your new keymap by typing &quot;6&quot;, and either allow the game to choose your character&#39;s name for the preference file, or (if you want all of your characters to use the same keymap) save to &quot;user.prf&quot;.<p>This is only the beginning. What you can do with a spell, you can do with arrows, Rods of Trap Location, resting, activating stuff, talents, searching; all sorts of command combinations can profitably be macroed. Macros and keymaps are even more flexible when used in combination with object inscriptions.<p>In all cases, you remember the exact series of keypresses you need to issue, pick an unused trigger key, and fill in the action field.<h4 id="s2_8">Macros</h4><p>Macros allow you to use a single keypress to activate a series of keypresses. They fire off in almost all cases: when the game is waiting for a command, is showing a menu, is asking you to enter text, etc. The only time they don&#39;t activate is when you already have a macro active.<p>You may use any key as a macro trigger, but it is recommended that you not use ordinary letters. You fill out the action field with the same commands you normally use.<h4 id="s2_9">Keymaps (sometimes known as &quot;command macros&quot;)</h4><p>Keymaps only fire off when the game is waiting for a command. You may not use special keys (like F1-F12) as keymap triggers, and must use underlying commands in the action field (a list of such commands is supplied below).<h4 id="s2_10">Effects of one on the other</h4><p>Macros are often affected by keymaps; you may bypass keymaps in macros by putting a &quot;\&quot; before any action key. Keymaps are never affected by macros.<h4 id="s2_11">Examples</h4><p>Macros are so handy that players (Jim Lyon in particular) have compiled lists of helpful tricks.<ul><li>To clear any pending messages:<br />Insert some &quot;\e&quot;s (escapes) before and/or after your macros. Be careful about skipping past important info! If you want to be a little more careful, use &quot;\s&quot;s (spaces) instead.<li>To learn how to represent any key:<br />Some keys cannot be entered simply as numbers or letters. To figure out how to include the escape key in an action, for example, you bring up the macro/keymap screen, type 3: Query a macro, and press escape (ESC) when asked for a trigger. This will tell you that an escape is represented by &quot;\e&quot;.<li>Rest as needed:<br />Keymap a trigger key to &quot;R*\r&quot;. This is also helpful when waiting for a monster to approach, because you recover mana and HPs twice as quickly than when staying in place.<li>Activate the Phial:<br />Macro a trigger key to &quot;Af\s\s&quot;.</ul><h4 id="s2_12">In Depth</h4><p>Not all keys can be entered as simple numbers or letters:<ul><li>\e : escape (useful for clearing the message line)<li>\r : return<li>\n : newline (is normally treated the same as return)<li>\s : space (&#39; &#39;)<li>\ : backslash (&#39;\&#39;)<li>\^ : caret (&#39;^&#39;)<li>^X : control-X (other control keys use the same system)<li>\x80 : character in position 0x80 (in hex: decimal equivalent would be 128)</ul><h4 id="s2_13">Listing of underlying commands:</h4><p>Underlying commands are usually the same as those in the original keyset, but there are important exceptions:<table border="1"><tr><th>Underlying command</th><th>Original keyset</th><th>Roguelike keyset</th><th>Action</th></tr><tr><td>5</td><td>,</td><td>.</td><td>Rest</td></tr><tr><td>.</td><td>.</td><td>,</td><td>Run</td></tr><tr><td>;1 <a class="footnote_ref" href="#FT__footnote_1" id="FT__footnote_ref_1" name="FT__footnote_ref_1">[1]</a></td><td>1</td><td>b</td><td>Down &amp; Left</td></tr><tr><td>;2</td><td>2</td><td>j</td><td>Down</td></tr><tr><td>;3</td><td>3</td><td>n</td><td>Down &amp; Right</td></tr><tr><td>;4</td><td>4</td><td>h</td><td>Left</td></tr><tr><td>;6</td><td>6</td><td>l</td><td>Right</td></tr><tr><td>;7</td><td>7</td><td>y</td><td>Up &amp; Left</td></tr><tr><td>;8</td><td>8</td><td>k</td><td>Up</td></tr><tr><td>;9</td><td>9</td><td>u</td><td>Up &amp; Right</td></tr><tr><td>Q</td><td>^C</td><td>^C</td><td></td></tr><tr><td>w0</td><td>X</td><td>X</td><td>Swap {@w0} inscribed items</td></tr><tr><td>^V</td><td>n</td><td>&#39;</td><td>Repeat last command</td></tr></table><div class="footnote"><a class="footnote_def" href="#FT__footnote_ref_1" id="FT__footnote_1" name="FT__footnote_1">[1]</a>: &#39;;&#39; is the move command</div><h3 id="s1_3">Useful Inscriptions And Macros <a class="footnote_ref" href="#FT__footnote_2" id="FT__footnote_ref_2" name="FT__footnote_ref_2">[2]</a></h3><table border="1"><tr><th>Inscription</th><th>Description of use</th></tr><tr><td>{@q1}</td><td>Use this as item 1 when quaffing a potion.</td></tr><tr><td>{@m1!d!k!v}</td><td>Use this as item 1 when casting a spell. Ask for confirmation before dropping, destroying, or throwing the item. This is probably your first spellbook.</td></tr><tr><td>{@m1@b1@G1!d!k!v}</td><td>As above, but it is also item 1 when browsing your spellbooks or gaining new spells.</td></tr><tr><td>@w0^;^.</td><td>Use this as item 0 when weilding. Ask for confirmation before walking (;) or running (.) with this item equipped. This is probably your shovel or pick. (The game attaches the command w0 to the &#39;X&#39; key by default, so you can swap between your shovel and weapon by inscribing both with @w0.)</td></tr><tr><td>@z0!*</td><td>Use this as item 0 when zapping a rod. Ask for confirmation before doing anything with this item, including zapping it. This is probably your Rod of Recall.</td></tr><tr><td>!<b>!</b>!<b>!</b>!*</td><td>Ask for confirmation five times before doing anything with this item. I don&#39;t know what this is, but you&#39;re worried about accidents.</td></tr><tr><td>@f0=g</td><td>inscribe arrows with this and use a macro : \e\e\ef0*t to shoot them.</td></tr></table><div class="footnote"><a class="footnote_def" href="#FT__footnote_ref_2" id="FT__footnote_2" name="FT__footnote_2">[2]</a>: See <a href="http://www.thangorodrim.net/help/macrofaq.txt">http://www.thangorodrim.net/help/macrofaq.txt</a> for many, many more</div></div></div>

